{% extends "base.html" %}

{% block title %}{{ post.title }}{% endblock %}

{% block meta_description %}{% if post.description %}{{ post.description }}{% endif %}{% endblock %}
{% block meta_keywords %}{% if post.keywords %}{{ post.keywords | join(', ') }}{% endif %}{% endblock %}

{% block content %}
    <h1>{{ post.title }}</h1>
    <p><em>Published on: {{ post.date.strftime('%B %d, %Y') }}</em></p>
    
    <div>
        {% if post.tags %}
            <p>Tags: 
            {% for tag in post.tags %}
                <span>
                    {% if post.type == 'diagram' %}
                        <a href="/diagrams/tags/{{ tag | lower }}.html">#{{ tag }}</a>
                    {% else %}
                        <a href="/tags/{{ tag | lower }}.html">#{{ tag }}</a>
                    {% endif %}
                </span>
            {% endfor %}
            </p>
        {% endif %}
    </div>

    <hr>

    <div class="content-area">
        {{ post.content_html | safe }}
    </div>

    {% if post.related_posts %}
    <section class="related-content">
        {% if post.type == 'diagram' %}
            <h2>Related Diagrams</h2>
        {% else %}
            <h2>Related Posts</h2>
        {% endif %}

        <ul>
            {% for related in post.related_posts %}
            <li><a href="{{ related.permalink }}">{{ related.title }}</a></li>
            {% endfor %}
        </ul>
    </section>
    {% endif %}

    <section>
        <h3>Share this post</h3>
        <p>
            <!-- Updated Twitter to X -->
            <a href="https://x.com/intent/tweet?text={{ post.title | urlencode }}&url={{ site_url }}{{ post.permalink }}" target="_blank" rel="noopener">Share on X</a>
            &nbsp;&bull;&nbsp;
            <a href="https://www.linkedin.com/shareArticle?mini=true&url={{ site_url }}{{ post.permalink }}&title={{ post.title | urlencode }}&summary={{ post.description | urlencode }}" target="_blank" rel="noopener">Share on LinkedIn</a>
            &nbsp;&bull;&nbsp;
            <a href="mailto:?subject={{ post.title | urlencode }}&body=Check out this post: {{ site_url }}{{ post.permalink }}" target="_blank" rel="noopener">Share via Email</a>
        </p>
    </section>
{% endblock %}
